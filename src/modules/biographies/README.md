# Biography Module

–ù–µ–∑–∞–≤–∏—Å–∏–º—ã–π –º–æ–¥—É–ª—å –±–∏–æ–≥—Ä–∞—Ñ–∏–π –¥–ª—è VideoControl.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- **–û—Ç–¥–µ–ª—å–Ω–∞—è –ë–î:** `config/biographies.db` (SQLite)
- **–ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:** `src/modules/biographies/`
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å VideoControl
- **–ü—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø:** –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
src/modules/biographies/
‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îú‚îÄ‚îÄ biographies-db.js   # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ schema.sql           # –°—Ö–µ–º–∞ —Ç–∞–±–ª–∏—Ü
‚îÇ   ‚îî‚îÄ‚îÄ queries.js           # CRUD —Ñ—É–Ω–∫—Ü–∏–∏
‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îî‚îÄ‚îÄ biographies-router.js # Express API
‚îú‚îÄ‚îÄ index.js                 # –≠–∫—Å–ø–æ—Ä—Ç –º–æ–¥—É–ª—è
‚îî‚îÄ‚îÄ README.md
```

## API Endpoints

### Public (–±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏):

- `GET /api/biographies` - –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ –±–∏–æ–≥—Ä–∞—Ñ–∏–∏
- `GET /api/biographies/search?q=query` - –ø–æ–∏—Å–∫ –ø–æ –§–ò–û
- `GET /api/biographies/:id` - –ø–æ–ª—É—á–∏—Ç—å –±–∏–æ–≥—Ä–∞—Ñ–∏—é –ø–æ ID

### Admin only (—Ç—Ä–µ–±—É–µ—Ç—Å—è JWT):

- `POST /api/biographies` - —Å–æ–∑–¥–∞—Ç—å –±–∏–æ–≥—Ä–∞—Ñ–∏—é
- `PUT /api/biographies/:id` - –æ–±–Ω–æ–≤–∏—Ç—å –±–∏–æ–≥—Ä–∞—Ñ–∏—é
- `DELETE /api/biographies/:id` - —É–¥–∞–ª–∏—Ç—å –±–∏–æ–≥—Ä–∞—Ñ–∏—é
- `POST /api/biographies/:id/media` - –¥–æ–±–∞–≤–∏—Ç—å –º–µ–¥–∏–∞
- `DELETE /api/biographies/media/:mediaId` - —É–¥–∞–ª–∏—Ç—å –º–µ–¥–∏–∞

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ biographies:

```sql
id INTEGER PRIMARY KEY
full_name TEXT NOT NULL
birth_year INTEGER
death_year INTEGER
rank TEXT
photo_base64 TEXT
biography TEXT
created_at DATETIME
updated_at DATETIME
```

### –¢–∞–±–ª–∏—Ü–∞ biography_media:

```sql
id INTEGER PRIMARY KEY
biography_id INTEGER (FK)
type TEXT ('photo', 'video')
media_base64 TEXT
caption TEXT
order_index INTEGER
created_at DATETIME
```

## –•—Ä–∞–Ω–µ–Ω–∏–µ –º–µ–¥–∏–∞

–í—Å–µ —Ñ–æ—Ç–æ –∏ –≤–∏–¥–µ–æ —Ö—Ä–∞–Ω—è—Ç—Å—è –∫–∞–∫ base64 —Å—Ç—Ä–æ–∫–∏ –≤ –ë–î:

- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä:** 5GB –Ω–∞ —Ñ–∞–π–ª
- **–§–æ—Ä–º–∞—Ç:** data:image/jpeg;base64,... –∏–ª–∏ data:video/mp4;base64,...
- **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:** 
  - –ü–æ—Ä—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å (–æ–¥–Ω–∞ –ë–î = –≤—Å–µ –¥–∞–Ω–Ω—ã–µ)
  - –ù–µ—Ç —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
  - –ù–µ—Ç –ø—É—Ç–µ–π/—Å–∏–º–ª–∏–Ω–∫–æ–≤

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –±–∏–æ–≥—Ä–∞—Ñ–∏–∏ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É:

1. –û—Ç–∫—Ä—ã—Ç—å –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
2. –ù–∞–∂–∞—Ç—å "üìñ –ë–∏–æ–≥—Ä–∞—Ñ–∏–∏"
3. "+" –î–æ–±–∞–≤–∏—Ç—å
4. –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É
5. –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ (–¥–æ 5GB)
6. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å

### –ü—Ä–æ—Å–º–æ—Ç—Ä –±–∏–æ–≥—Ä–∞—Ñ–∏–∏:

1. –û—Ç–∫—Ä—ã—Ç—å `/biography.html`
2. –í–≤–µ—Å—Ç–∏ –§–ò–û –≤ –ø–æ–∏—Å–∫
3. –í—ã–±—Ä–∞—Ç—å –∏–∑ –ø–æ–¥—Å–∫–∞–∑–æ–∫
4. –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –±–∏–æ–≥—Ä–∞—Ñ–∏—é
5. –ö–ª–∏–∫–Ω—É—Ç—å –Ω–∞ –º–µ–¥–∏–∞ –¥–ª—è lightbox

## –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

–ú–æ–¥—É–ª—å –ª–µ–≥–∫–æ –≤—ã–¥–µ–ª–∏—Ç—å –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å:

```bash
# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥—É–ª—å
cp -r src/modules/biographies /path/to/biographies-service

# –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π Express —Å–µ—Ä–≤–µ—Ä
# –ü–æ–¥–∫–ª—é—á–∏—Ç—å biographies.db
# –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ä—Ç—É

# –û–±–Ω–æ–≤–∏—Ç—å VideoControl:
# - –ó–∞–º–µ–Ω–∏—Ç—å API calls –Ω–∞ –≤–Ω–µ—à–Ω–∏–π URL
# - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CORS
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **JWT:** —Ç–æ–ª—å–∫–æ admin –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
- **–ü—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø:** —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ (GET routes)
- **–í–∞–ª–∏–¥–∞—Ü–∏—è:** —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤ ‚â§ 5GB
- **SQL Injection:** prepared statements (better-sqlite3)

## TODO (–±—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è)

- [ ] –ü–∞–≥–∏–Ω–∞—Ü–∏—è —Å–ø–∏—Å–∫–∞ –±–∏–æ–≥—Ä–∞—Ñ–∏–π
- [ ] –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ –ø–æ –±–∏–æ–≥—Ä–∞—Ñ–∏–∏
- [ ] –≠–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç –±–∏–æ–≥—Ä–∞—Ñ–∏–π (JSON)
- [ ] Thumbnails –¥–ª—è –≤–∏–¥–µ–æ –≤ –≥–∞–ª–µ—Ä–µ–µ
- [ ] Drag & drop –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –º–µ–¥–∏–∞
- [ ] –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –º–µ–¥–∏–∞ (reorder)
- [ ] –ö–∞—Ç–µ–≥–æ—Ä–∏–∏/—Ç–µ–≥–∏ –±–∏–æ–≥—Ä–∞—Ñ–∏–π
- [ ] –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π (audit log)


# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Å Nginx

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ (3 –∫–æ–º–∞–Ω–¥—ã)

```bash
# 1. –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–ø–∫—É nginx
cd /vid/videocontrol/nginx

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É Nginx
sudo bash install-nginx.sh

# 3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É
bash test-nginx.sh
```

–ì–æ—Ç–æ–≤–æ! ‚úÖ

## –ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ?

- ‚úÖ Nginx —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ Nginx —Å–ª—É—à–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É **80**
- ‚úÖ Node.js —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É **3000** (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π)
- ‚úÖ –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç —Ä–∞–∑–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ Nginx (–±—ã—Å—Ç—Ä–æ!)
- ‚úÖ API –∏ WebSocket –ø—Ä–æ–∫—Å–∏—Ä—É—é—Ç—Å—è –Ω–∞ Node.js

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

```
http://your-server-ip/
http://your-server-ip/admin.html
http://your-server-ip/player.html?device_id=test001
```

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ Nginx —Ä–∞–∑–¥–∞–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç:

```bash
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å 200 OK —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ Nginx
curl -I http://localhost/content/pc001/default.mp4
```

–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:
```
HTTP/1.1 200 OK
Server: nginx
Accept-Ranges: bytes
Cache-Control: public, immutable
...
```

## –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

```bash
# –°—Ç–∞—Ç—É—Å
sudo systemctl status nginx

# –†–µ—Å—Ç–∞—Ä—Ç
sudo systemctl restart nginx

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
sudo systemctl stop nginx

# –ó–∞–ø—É—Å–∫
sudo systemctl start nginx

# –õ–æ–≥–∏ –æ—à–∏–±–æ–∫
sudo tail -f /var/log/nginx/videocontrol_error.log

# –õ–æ–≥–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
sudo tail -f /var/log/nginx/videocontrol_access.log
```

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –î–æ Nginx:
- –°–∫–æ—Ä–æ—Å—Ç—å: ~50-100 MB/s
- –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è: 10-20

### –ü–æ—Å–ª–µ Nginx:
- –°–∫–æ—Ä–æ—Å—Ç—å: ~500-1000 MB/s (‚ö° 10x –±—ã—Å—Ç—Ä–µ–µ!)
- –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è: 100+

## Troubleshooting

### –û—à–∏–±–∫–∞: "502 Bad Gateway"
**–ü—Ä–∏—á–∏–Ω–∞:** Node.js —Å–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
```bash
cd /vid/videocontrol
npm start
```

### –û—à–∏–±–∫–∞: "Permission denied" –¥–ª—è /content/
**–ü—Ä–∏—á–∏–Ω–∞:** Nginx –Ω–µ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º

**–†–µ—à–µ–Ω–∏–µ:**
```bash
sudo chown -R www-data:www-data /vid/videocontrol/public/content/
sudo chmod -R 755 /vid/videocontrol/public/content/
```

### –ü–æ—Ä—Ç 80 –∑–∞–Ω—è—Ç
**–ü—Ä–∏—á–∏–Ω–∞:** –î—Ä—É–≥–æ–π –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Ä—Ç 80

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
sudo netstat -tlnp | grep :80
# –∏–ª–∏
sudo lsof -i :80
```

**–†–µ—à–µ–Ω–∏–µ:** –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –¥—Ä—É–≥–æ–π —Å–µ—Ä–≤–µ—Ä –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç –≤ nginx –∫–æ–Ω—Ñ–∏–≥–µ

## –ß—Ç–æ –¥–∞–ª—å—à–µ?

‚úÖ Nginx –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç  
‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —É–≤–µ–ª–∏—á–µ–Ω–∞ –≤ 10 —Ä–∞–∑  

–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:
1. [–î–æ–±–∞–≤–∏—Ç—å HTTPS](#https-–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
2. –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (VLC, MPV, Android TV)
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### HTTPS (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è HTTPS —Å Let's Encrypt:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å certbot
sudo apt install certbot python3-certbot-nginx -y

# –ü–æ–ª—É—á–∏—Ç—å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
sudo certbot --nginx -d your-domain.com

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
sudo certbot renew --dry-run
```

Certbot –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç HTTPS –≤ –≤–∞—à–µ–π nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

---

**–ì–æ—Ç–æ–≤–æ!** –í–∞—à VideoControl —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π Nginx! üéâ


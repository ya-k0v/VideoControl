# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è Android MediaPlayer APK

**–î–∞—Ç–∞:** 2025-11-08  
**–í–µ—Ä—Å–∏—è:** v1.0.1  
**–†–∞–∑–º–µ—Ä APK:** 9.45 MB (–±—ã–ª–æ 9.38 MB)

---

## ‚úÖ –ß–¢–û –ë–´–õ–û –ò–°–ü–†–ê–í–õ–ï–ù–û

### 1Ô∏è‚É£ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ PDF/PPTX** ‚ú®

**–ü—Ä–æ–±–ª–µ–º–∞:**  
–°–µ—Ä–≤–µ—Ä –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç PDF/PPTX –≤ PNG –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Ö **–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–ª–æ**. –°–æ–±—ã—Ç–∏—è —Å —Ç–∏–ø–æ–º `"pdf"` –∏ `"pptx"` –ø–æ–ø–∞–¥–∞–ª–∏ –≤ –±–ª–æ–∫ `else` –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–ª–∏—Å—å –∫–∞–∫ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ.

**–†–µ—à–µ–Ω–∏–µ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–∏–ø–æ–≤ `"pdf"` –∏ `"pptx"` –≤ `handlePlay()`
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ `showPdfPage()` –∏ `showPptxSlide()`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–ª—É—à–∞—Ç–µ–ª–∏ —Å–æ–±—ã—Ç–∏–π `player/pdfPage` –∏ `player/pptxPage` –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü
- ‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ API: `/api/devices/:id/converted/:file/page/:num`

**–ö–æ–¥:**
```kotlin
private fun handlePlay(data: JSONObject) {
    val type = data.optString("type")
    val file = data.optString("file")
    val page = data.optInt("page", 1)

    when (type) {
        "video" -> playVideo(file)
        "image" -> showImage(file)
        "pdf" -> showPdfPage(file, page)    // ‚úÖ –ù–û–í–û–ï
        "pptx" -> showPptxSlide(file, page) // ‚úÖ –ù–û–í–û–ï
        else -> Log.w(TAG, "Unknown type: $type")
    }
}
```

**Capabilities –æ–±–Ω–æ–≤–ª–µ–Ω—ã:**
```kotlin
put("pdf", true)   // ‚úÖ –ë—ã–ª–æ: false
put("pptx", true)  // ‚úÖ –ë—ã–ª–æ: false
```

---

### 2Ô∏è‚É£ **–ó–∞–≥–ª—É—à–∫–∞ (Placeholder)** ‚ú®

**–ü—Ä–æ–±–ª–µ–º–∞:**  
–§—É–Ω–∫—Ü–∏—è `loadPlaceholder()` **–ù–ï –∑–∞–≥—Ä—É–∂–∞–ª–∞** –∑–∞–≥–ª—É—à–∫—É —Å —Å–µ—Ä–≤–µ—Ä–∞. –¢–æ–ª—å–∫–æ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª–∞ –≤–∏–¥–µ–æ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∞ —á–µ—Ä–Ω—ã–π —ç–∫—Ä–∞–Ω.

**–†–µ—à–µ–Ω–∏–µ:**
- ‚úÖ –ó–∞–ø—Ä–æ—Å –∫ API `/api/devices/:id/placeholder`
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –∑–∞–≥–ª—É—à–∫–∏ (–≤–∏–¥–µ–æ/–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–≥–ª—É—à–∫–∏ –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è

**–ö–æ–¥:**
```kotlin
private fun loadPlaceholder() {
    player?.stop()
    
    CoroutineScope(Dispatchers.IO).launch {
        val url = URL("$SERVER_URL/api/devices/$DEVICE_ID/placeholder")
        // ... HTTP –∑–∞–ø—Ä–æ—Å ...
        
        val placeholderFile = json.optString("placeholder", null)
        if (placeholderFile != null) {
            val ext = placeholderFile.substringAfterLast('.').toLowerCase()
            
            withContext(Dispatchers.Main) {
                when {
                    ext in listOf("mp4", "webm", ...) -> playVideo(placeholderFile)
                    ext in listOf("png", "jpg", ...) -> loadImageToView(imageUrl)
                }
            }
        }
    }
}
```

---

### 3Ô∏è‚É£ **–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** ‚ú®

**–ü—Ä–æ–±–ª–µ–º–∞:**  
`showImage()` –∏–º–µ–ª–∞ TODO –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –±–µ–∑ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.

**–†–µ—à–µ–Ω–∏–µ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `loadImageToView()` –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ—Ä—É—Ç–∏–Ω—ã –¥–ª—è —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –î–µ–∫–æ–¥–∏—Ä—É–µ—Ç Bitmap –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≤ ImageView

**–ö–æ–¥:**
```kotlin
private fun loadImageToView(imageUrl: String) {
    CoroutineScope(Dispatchers.IO).launch {
        val connection = URL(imageUrl).openConnection() as HttpURLConnection
        connection.connectTimeout = 30000
        connection.readTimeout = 30000
        
        if (connection.responseCode == 200) {
            val bitmap = BitmapFactory.decodeStream(connection.inputStream)
            withContext(Dispatchers.Main) {
                imageView.setImageBitmap(bitmap)
                Log.d(TAG, "‚úÖ Image loaded successfully")
            }
        }
    }
}
```

---

## üìã –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò

### –ù–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```kotlin
import kotlinx.coroutines.CoroutineScope
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.launch
import kotlinx.coroutines.withContext
```

### –ù–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è:
```kotlin
private var currentPdfFile: String? = null
private var currentPdfPage: Int = 1
private var currentPptxFile: String? = null
private var currentPptxSlide: Int = 1
```

### –ù–æ–≤—ã–µ Socket.IO —Å–æ–±—ã—Ç–∏—è:
```kotlin
socket?.on("player/pdfPage") { args ->
    val page = args[0] as? Int ?: 1
    runOnUiThread { showPdfPage(null, page) }
}

socket?.on("player/pptxPage") { args ->
    val page = args[0] as? Int ?: 1
    runOnUiThread { showPptxSlide(null, page) }
}
```

---

## üéØ –°–û–í–ú–ï–°–¢–ò–ú–û–°–¢–¨ –° –°–ï–†–í–ï–†–û–ú

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ API endpoints:

| Endpoint | –ú–µ—Ç–æ–¥ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|----------|-------|------------|
| `/content/:device_id/:file` | GET | –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ/–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π |
| `/api/devices/:id/placeholder` | GET | –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–≥–ª—É—à–∫–∏ |
| `/api/devices/:id/converted/:file/page/:num` | GET | PDF —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–∞–∫ PNG |
| `/api/devices/:id/converted/:file/slide/:num` | GET | PPTX —Å–ª–∞–π–¥ –∫–∞–∫ PNG |

### Socket.IO —Å–æ–±—ã—Ç–∏—è (—Å–ª—É—à–∞–µ—Ç –∫–ª–∏–µ–Ω—Ç):

| –°–æ–±—ã—Ç–∏–µ | –î–∞–Ω–Ω—ã–µ | –î–µ–π—Å—Ç–≤–∏–µ |
|---------|--------|----------|
| `player/play` | `{type, file, page}` | –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ |
| `player/pause` | - | –ü–∞—É–∑–∞ |
| `player/stop` | - | –û—Å—Ç–∞–Ω–æ–≤–∫–∞ + –∑–∞–≥–ª—É—à–∫–∞ |
| `player/restart` | - | –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å –Ω–∞—á–∞–ª–∞ |
| `player/pdfPage` | `page: Int` | –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã PDF |
| `player/pptxPage` | `page: Int` | –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å–ª–∞–π–¥–∞ PPTX |
| `placeholder/refresh` | - | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≥–ª—É—à–∫–∏ |

---

## ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢

### –ë—ã–ª–æ:
- ‚ùå PDF/PPTX –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å
- ‚ùå –ó–∞–≥–ª—É—à–∫–∞ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–ª–∞—Å—å
- ‚ùå –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏—Å—å
- ‚ö†Ô∏è Capabilities: `pdf: false, pptx: false`

### –°—Ç–∞–ª–æ:
- ‚úÖ PDF/PPTX –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –∫–∞–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- ‚úÖ –ó–∞–≥–ª—É—à–∫–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å —Å–µ—Ä–≤–µ—Ä–∞
- ‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- ‚úÖ Capabilities: `pdf: true, pptx: true`

---

## üöÄ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### –°—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:

1. **PDF –¥–æ–∫—É–º–µ–Ω—Ç:**
   - –ó–∞–≥—Ä—É–∑–∏—Ç–µ PDF —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–µ—Ä–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
   - –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É (Prev/Next)

2. **PPTX –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è:**
   - –ó–∞–≥—Ä—É–∑–∏—Ç–µ PPTX —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–µ—Ä–≤—ã–π —Å–ª–∞–π–¥
   - –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ —Å–ª–∞–π–¥—ã —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É (Prev/Next)

3. **–ó–∞–≥–ª—É—à–∫–∞:**
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ default.mp4 –∏–ª–∏ default.jpg —á–µ—Ä–µ–∑ "Set as Default"
   - –ù–∞–∂–º–∏—Ç–µ Stop –Ω–∞ –ª—é–±–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∑–∞–≥–ª—É—à–∫–∞
   - –û–±–Ω–æ–≤–∏—Ç–µ –∑–∞–≥–ª—É—à–∫—É (placeholder/refresh) –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –æ–Ω–∞ –æ–±–Ω–æ–≤–∏–ª–∞—Å—å

4. **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:**
   - –ó–∞–≥—Ä—É–∑–∏—Ç–µ PNG/JPG —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ

---

## üìä –†–ê–ó–ú–ï–†–´ APK

| –í–µ—Ä—Å–∏—è | –†–∞–∑–º–µ—Ä | –ò–∑–º–µ–Ω–µ–Ω–∏–µ |
|--------|--------|-----------|
| v1.0.0 | 9.38 MB | - |
| v1.0.1 | 9.45 MB | +70 KB |

**–ü—Ä–∏—Ä–æ—Å—Ç:** ~70 KB –∑–∞ —Å—á—ë—Ç –¥–æ–±–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞ –¥–ª—è PDF/PPTX/Placeholder/Images

---

## üéâ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**–í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã!**

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å **–ü–û–õ–ù–û–°–¢–¨–Æ –°–û–í–ú–ï–°–¢–ò–ú–û** —Å –±—ç–∫–µ–Ω–¥–æ–º:
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **–≤—Å–µ** —Ç–∏–ø—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (video, image, pdf, pptx)
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç **–≤—Å–µ** —Å–æ–±—ã—Ç–∏—è —Å–µ—Ä–≤–µ—Ä–∞
- ‚úÖ –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç **–∑–∞–≥–ª—É—à–∫—É**
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å **–±–æ–ª—å—à–∏–º–∏ –≤–∏–¥–µ–æ** (–±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è, –∫—ç—à)

**APK –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É!** üöÄ


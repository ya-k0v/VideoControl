# VideoControl Native MediaPlayer –¥–ª—è Android TV

–ù–∞—Ç–∏–≤–Ω–æ–µ Android –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –º–µ–¥–∏–∞-–∫–æ–Ω—Ç–µ–Ω—Ç–∞ 24/7.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **ExoPlayer** - —Å—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏ –ª—é–±–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞
- ‚úÖ **Glide** - –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å –∫—ç—à–µ–º
- ‚úÖ **PDF/PPTX** - —á–µ—Ä–µ–∑ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- ‚úÖ **–ê–≤—Ç–æ–∑–∞–ø—É—Å–∫** - –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- ‚úÖ **Watchdog** - –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Å–≤—è–∑–∏ > 3 –º–∏–Ω—É—Ç
- ‚úÖ **Wake Lock** - —ç–∫—Ä–∞–Ω –Ω–µ –≥–∞—Å–Ω–µ—Ç
- ‚úÖ **Retry** - –∞–≤—Ç–æ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö (3 –ø–æ–ø—ã—Ç–∫–∏)
- ‚úÖ **24/7** - —Å—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–≤

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Android:** 5.0+ (API 21+)
- **Gradle:** 8.1+, JDK 17
- **–°–µ—Ç—å:** Wi-Fi –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É

## ‚ö° –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (–ù–û–í–û–ï!)

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π:**

```bash
cd /vid/videocontrol
./scripts/quick-setup-android.sh <device_ip:port> <server_url> <device_id>

# –ü—Ä–∏–º–µ—Ä:
./scripts/quick-setup-android.sh 192.168.11.57:5555 http://192.168.11.1 ATV001
```

**‚ú® –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç APK
- –ù–∞—Å—Ç—Ä–æ–∏—Ç Server URL –∏ Device ID
- –û—Ç–∫–ª—é—á–∏—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –±–∞—Ç–∞—Ä–µ–∏
- –ù–∞—Å—Ç—Ä–æ–∏—Ç –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
- –û—Ç–∫–ª—é—á–∏—Ç —Ç–∞–π–º–∞—É—Ç —ç–∫—Ä–∞–Ω–∞
- –ó–∞–ø—É—Å—Ç–∏—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

üìñ **–ü–æ–¥—Ä–æ–±–Ω–µ–µ:** [QUICK_SETUP.md](QUICK_SETUP.md)

---

## –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –°–±–æ—Ä–∫–∞ APK

```bash
cd /vid/videocontrol/clients/android-mediaplayer
./gradlew assembleDebug
```

**APK:** `app/build/outputs/apk/debug/app-debug.apk`

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É
adb connect <device_ip>:5555

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞
adb install -r app/build/outputs/apk/debug/app-debug.apk
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –¥–ª—è 24/7

```bash
./setup-device-24-7.sh <device_ip>:5555
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –û—Ç–∫–ª—é—á–∏—Ç —Ç–∞–π–º–∞—É—Ç —ç–∫—Ä–∞–Ω–∞
- –î–æ–±–∞–≤–∏—Ç –≤ whitelist –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –±–∞—Ç–∞—Ä–µ–∏
- –í–∫–ª—é—á–∏—Ç Stay Awake –ø—Ä–∏ –ø–∏—Ç–∞–Ω–∏–∏
- –ü—Ä–æ–≤–µ—Ä–∏—Ç –≤—Å–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
2. –í–≤–µ–¥–∏—Ç–µ **Server URL** –∏ **Device ID**
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

### 5. –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –Ω–∞ Xiaomi/Huawei (–≤—Ä—É—á–Ω—É—é)

**–î–ª—è Xiaomi Mi TV:**
```
Settings ‚Üí Apps ‚Üí VideoControl MediaPlayer
‚Üí Autostart: ON ‚úÖ
‚Üí Battery: No restrictions
```

**–î–ª—è Huawei:**
```
Settings ‚Üí Battery ‚Üí App launch ‚Üí VideoControl
‚Üí Manual: ON ‚Üí Auto-launch: ON ‚úÖ
```

**–î–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö (Sony/TCL/Philips/Generic):**
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç

### 6. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞

```bash
adb reboot
# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ 1-2 —Å–µ–∫—É–Ω–¥—ã
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
adb shell "ps -A | grep videocontrol"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
adb logcat -d | grep -E "BootReceiver|VCMediaPlayer"
```

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

**–ö–æ–º–∞–Ω–¥—ã —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É:**
- `play` - –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –∫–æ–Ω—Ç–µ–Ω—Ç
- `pause` - –ø–∞—É–∑–∞ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –ø–æ–∑–∏—Ü–∏–∏
- `stop` - –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –≤–æ–∑–≤—Ä–∞—Ç –∫ –∑–∞–≥–ª—É—à–∫–µ
- `restart` - –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å –Ω–∞—á–∞–ª–∞

**–î–æ—Å—Ç—É–ø –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º:**
- –î–ª–∏–Ω–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ –Ω–∞ —ç–∫—Ä–∞–Ω ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å | –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ | –ü—Ä–∏–º–µ—á–∞–Ω–∏—è |
|---------------|------------|------------|
| Sony/TCL/Philips TV | ‚úÖ –ê–≤—Ç–æ | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π Android TV |
| Generic TV Box | ‚úÖ –ê–≤—Ç–æ | –ë–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π |
| **Xiaomi Mi TV** | ‚ö†Ô∏è –í—Ä—É—á–Ω—É—é | –í–∫–ª—é—á–∏—Ç—å Autostart –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö |
| Samsung | ‚ö†Ô∏è –í—Ä—É—á–Ω—É—é | –û—Ç–∫–ª—é—á–∏—Ç—å Knox –µ—Å–ª–∏ –µ—Å—Ç—å |
| Huawei/Honor | ‚ö†Ô∏è –í—Ä—É—á–Ω—É—é | –ó–∞—â–∏—â—ë–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è |

**–ú–∏–Ω–∏–º—É–º:** Android 5.0+ (API 21+)

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```gradle
ExoPlayer 2.19.1          // –í–∏–¥–µ–æ
Socket.IO Client 2.1.0    // WebSocket
Glide 4.16.0             // –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
Kotlin Coroutines 1.7.3  // –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å
Gson 2.10.1              // JSON
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
app/src/main/java/com/videocontrol/mediaplayer/
‚îú‚îÄ‚îÄ MainActivity.kt         // –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω —Å –ø–ª–µ–µ—Ä–æ–º
‚îú‚îÄ‚îÄ SettingsActivity.kt     // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (Server URL, Device ID)
‚îú‚îÄ‚îÄ BootReceiver.kt         // –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏
‚îú‚îÄ‚îÄ ConnectionWatchdog.kt   // –ê–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Å–≤—è–∑–∏
‚îî‚îÄ‚îÄ RemoteConfig.kt         // –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å —Å–µ—Ä–≤–µ—Ä–∞
```

## –§–∞–π–ª—ã

- **README.md** - —ç—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- **setup-device-24-7.sh** - —Å–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- **AUTOSTART.md** - –¥–µ—Ç–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫—É
- **BUILD.md** - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Å–±–æ—Ä–∫–µ
